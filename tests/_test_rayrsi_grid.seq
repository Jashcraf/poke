! testing rayrsi




num ^x_array(2,1024) ^y_array(2,1024) ^z_array(2,1024) ^l_array(2,1024) ^m_array(2,1024) ^n_array(2,1024) ^l2_array(2,1024) ^m2_array(2,1024) ^n2_array(2,1024) ! we want to fill this up
num ^success

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! --- CREATING THE RAY GRID --- !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

! number of rays
^nrays == 65536


^nrays_across == sqrt(^nrays)

! raybundle limits
^x_start == -1
^x_end == 1
^y_start == -1
^y_end == 1

^step_size == absf(^y_start-^y_end)/(^nrays_across-1)

! Begin with first coordinate
^x_cord == ^x_start
^y_cord == ^y_start

! bool on whether we should switch to the next row on the following loop
^next_row == 0


FOR ^iter 1 ^nrays

	^input_array(1,^iter) == ^x_cord
	^input_array(2,^iter) == ^y_cord

	! update the x_cord
	^x_cord == ^x_cord + ^step_size

	IF modf(^iter,^nrays_across) = 0
		^next_row == 1
		! wri "current x cord"
		! wri ^x_cord
		! wri "current y cord"
		! wri ^y_cord
	END IF


	IF ^next_row = 1
		! update y_cord
		^y_cord == ^y_cord + ^step_size

		! reset x_cord
		^x_cord == ^x_start

		! reset next_row
		^next_row == 0
	END IF

END FOR

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! --- /CREATING THE RAY GRID --- !
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!




